pkgname=spirv-llvm-translator
pkgver=20.1.2
pkgrel=1
arch=(x86_64)
makedepends=(cmake git llvm ninja spirv-headers)
depends=(gcc-libs glibc llvm-libs spirv-tools)
groups=(vulkan-devel)
source=(SPIRV-LLVM-Translator::git+https://github.com/KhronosGroup/SPIRV-LLVM-Translator.git#commit=6dd8f2a1681a27f16c53d932d2765920f312aeb2)

build() {
  cmake -S SPIRV-LLVM-Translator -B _build -G Ninja \
    -D CMAKE_BUILD_TYPE=Release \
    -D CMAKE_INSTALL_PREFIX=/usr \
    -D LLVM_EXTERNAL_SPIRV_HEADERS_SOURCE_DIR=/usr/include/spirv \
    -Wno-dev
  cmake --build _build
}

package() {
  DESTDIR="${pkgdir}" cmake --install _build
}
#    -D BUILD_SHARED_LIBS=ON \
#    -D CMAKE_POSITION_INDEPENDENT_CODE=ON \
