pkgname=spirv-headers-git
pkgver=r698.3786ee8
pkgrel=1
arch=(x86_64)
makedepends=(cmake git ninja)
groups=(vulkan-devel)
provides=(spirv-headers)
conflicts=(spirv-headers)
source=(SPIRV-Headers::git+https://github.com/KhronosGroup/SPIRV-Headers.git)

pkgver() {
    cd SPIRV-Headers
	git describe --long --tags | sed 's/^[^0-9]*//; s/\([^-]*-g\)/r\1/; s/-/./g'
}

build() {
  cmake -S SPIRV-Headers -B _build -G Ninja \
        -D CMAKE_BUILD_TYPE=Release \
        -D CMAKE_INSTALL_PREFIX=/usr \
        -Wno-dev
  cmake --build _build
}

package() {
  DESTDIR="$pkgdir" cmake --install _build
}
