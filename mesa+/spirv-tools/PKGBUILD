pkgname=spirv-tools
pkgver=2025.2
pkgrel=1
arch=(x86_64)
makedepends=(cmake git ninja python spirv-headers)
depends=(gcc-libs glibc sh)
groups=(vulkan-devel)
source=(SPIRV-Tools::git+https://github.com/KhronosGroup/SPIRV-Tools.git#commit=a62abcb402009b9ca5975e6167c09f237f630e0e)

build() {
  cmake -S SPIRV-Tools -B _build -G Ninja \
        -D BUILD_SHARED_LIBS=ON \
        -D SPIRV_TOOLS_BUILD_STATIC=OFF \
        -D CMAKE_BUILD_TYPE=Release \
        -D CMAKE_INSTALL_PREFIX=/usr \
        -D SPIRV-Headers_SOURCE_DIR=/usr \
        -Wno-dev
  cmake --build _build
}

package() {
  DESTDIR="$pkgdir" cmake --install _build
}
